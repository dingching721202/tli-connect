<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>課程統一設定功能測試</title>
    <style>
        body {
            font-family: 'Microsoft JhengHei', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .section {
            background: #f8f9fa;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        .feature {
            background: #e8f5e8;
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
        }
        .code {
            background: #f1f1f1;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            margin: 10px 0;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .info {
            color: #17a2b8;
            font-weight: bold;
        }
        .warning {
            color: #ffc107;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>🎯 課程統一設定功能測試報告</h1>
    
    <div class="section">
        <h2>📋 功能概述</h2>
        <p>已成功實作課程模組的統一設定功能，讓使用者可以：</p>
        <ul>
            <li>設定整個課程的統一課程標題模板、虛擬教室連結、教材連結</li>
            <li>新增課程時自動使用統一設定作為預設值</li>
            <li>每個單一課程可以選擇使用統一設定或獨立設定</li>
            <li>一鍵套用統一設定到所有課程</li>
        </ul>
    </div>

    <div class="section">
        <h2>🔧 實作的功能</h2>
        
        <div class="feature">
            <h3 class="success">✅ 資料結構擴展</h3>
            <p>在 <code>CourseTemplate</code> 介面中新增了 <code>globalSettings</code> 欄位：</p>
            <div class="code">
globalSettings?: {
  defaultTitle?: string; // 統一課程標題模板，例如 "第{n}課"
  defaultVirtualClassroomLink?: string; // 統一虛擬教室連結
  defaultMaterialLink?: string; // 統一教材連結
};
            </div>
        </div>

        <div class="feature">
            <h3 class="success">✅ 課程 Session 控制</h3>
            <p>在 <code>CourseSession</code> 介面中新增了控制欄位：</p>
            <div class="code">
useGlobalTitle?: boolean; // 是否使用統一標題
useGlobalClassroom?: boolean; // 是否使用統一虛擬教室
useGlobalMaterial?: boolean; // 是否使用統一教材
            </div>
        </div>

        <div class="feature">
            <h3 class="success">✅ 統一設定 UI</h3>
            <p>在課程模板編輯介面中新增了紫色背景的統一設定區塊，包含：</p>
            <ul>
                <li>統一課程標題模板（支援 {n} 變數代表課程編號）</li>
                <li>統一虛擬教室連結</li>
                <li>統一教材連結</li>
                <li>"套用到所有課程" 按鈕</li>
            </ul>
        </div>

        <div class="feature">
            <h3 class="success">✅ 極簡智慧判斷</h3>
            <p><strong>欄位有填資訊就是獨立設定，空的就自動使用統一設定！</strong></p>
            <ul>
                <li><span class="info">空欄位</span> - 自動使用統一設定，顯示紫色標籤提示</li>
                <li><span class="info">有內容</span> - 自動變成獨立設定，使用填入的內容</li>
            </ul>
            <p class="success">🎯 <strong>完全不需要按鈕！</strong>填或不填就決定了使用方式，超級直觀！</p>
        </div>
    </div>

    <div class="section">
        <h2>🎮 使用方式</h2>
        
        <div class="feature">
            <h3>1. 設定統一資訊</h3>
            <p>在 "統一設定" 區塊中填入：</p>
            <ul>
                <li><strong>統一課程標題模板：</strong> 例如 "第{n}課 - 基礎會話"</li>
                <li><strong>統一虛擬教室連結：</strong> 例如 "https://meet.google.com/abc-defg-hij"</li>
                <li><strong>統一教材連結：</strong> 例如 "https://drive.google.com/materials"</li>
            </ul>
        </div>

        <div class="feature">
            <h3>2. 套用到所有課程</h3>
            <p>點擊 <span class="info">"套用到所有課程"</span> 按鈕，會將統一設定套用到所有啟用統一設定的課程。</p>
        </div>

        <div class="feature">
            <h3>3. 個別課程調整</h3>
            <p>對於需要特殊設定的課程：</p>
            <ul>
                <li><strong>直接在欄位中輸入內容</strong> - 自動變成獨立設定</li>
                <li><strong>清空欄位內容</strong> - 自動回到使用統一設定</li>
                <li>紫色標籤會即時顯示目前是否使用統一設定</li>
            </ul>
        </div>

        <div class="feature">
            <h3>4. 新增課程智慧預設</h3>
            <p>當增加課程堂數時，新增的課程會：</p>
            <ul>
                <li><strong>預設使用統一設定</strong> - 不需要手動啟用</li>
                <li>課程標題會自動替換 {n} 為對應的課程編號</li>
                <li>顯示統一設定的內容，除非手動切換為獨立設定</li>
            </ul>
            <p class="success">✨ <strong>更直觀：</strong>新課程預設就是用統一設定，符合大部分使用情境！</p>
        </div>
    </div>

    <div class="section">
        <h2>🔍 測試建議</h2>
        
        <div class="feature">
            <h3>測試步驟</h3>
            <ol>
                <li>進入課程模組管理頁面</li>
                <li>新增或編輯一個課程模板</li>
                <li>在統一設定區塊填入測試資料：
                    <ul>
                        <li>標題模板：第{n}課 - 測試課程</li>
                        <li>虛擬教室：https://meet.google.com/test</li>
                        <li>教材連結：https://example.com/materials</li>
                    </ul>
                </li>
                <li>設定課程堂數為 3 堂</li>
                <li>點擊 "套用到所有課程" 按鈕</li>
                <li>檢查所有課程是否正確套用統一設定</li>
                <li>測試切換個別課程的 "使用統一" / "獨立設定" 功能</li>
                <li>儲存並檢查資料是否正確保存</li>
            </ol>
        </div>
    </div>

    <div class="section">
        <h2>📈 預期效果</h2>
        <ul>
            <li class="success">✅ 大幅提升課程建立效率</li>
            <li class="success">✅ 確保課程資訊的一致性</li>
            <li class="success">✅ 保留個別課程的彈性調整能力</li>
            <li class="success">✅ 直觀的使用者介面</li>
            <li class="success">✅ 向下相容現有的課程資料</li>
        </ul>
    </div>

    <div class="section">
        <h2>🎯 總結</h2>
        <p class="success">
            統一設定功能已成功實作完成！這個功能完美解決了您提出的需求：
            既可以設置整個課程的統一資訊，又保留了修改單一堂課內容的彈性。
        </p>
        <p class="info">
            <strong>🚀 最新優化：</strong>移除所有切換按鈕！欄位有填資訊就是獨立設定，空的就用統一設定。
            這是最直觀的邏輯：想用統一的就留空，想客製化就填內容。完全不需要額外操作！
        </p>
        <p class="success">
            使用者現在可以更有效率地管理課程內容，同時確保資訊的一致性。
        </p>
    </div>
</body>
</html>